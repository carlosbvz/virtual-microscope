(this["webpackJsonpmap-poc"]=this["webpackJsonpmap-poc"]||[]).push([[8],{159:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var o=n(161),a=n(162),r=n(164),i=n(163),l=n(60),c=n(0),u=n.n(c),s=n(151),p=n(59),d=n(100),m=n(253),f=n(254),g=n(73),h=n(30),E=n(31),k=n(262),b=n(147),w=n(168),y=n.n(w),M=n(145),D=n(249),v=n(246),C=n(247),x=n(248),O=n(166),j=n.n(O),S=n(167),V=n.n(S),T=Object(d.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},list:{width:250},fullList:{width:"auto"}}}));function R(){var e=T(),t=u.a.useState(!1),n=Object(E.a)(t,2),o=n[0],a=n[1],r=function(){return function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&a(!o)}};return u.a.createElement(u.a.Fragment,null,u.a.createElement(b.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer",onClick:r()},u.a.createElement(y.a,null)),u.a.createElement(k.a,{open:o,onClose:r()},u.a.createElement("div",{className:e.list,role:"presentation",onClick:r(),onKeyDown:r()},u.a.createElement(M.a,null,["Inbox","Starred","Send email","Drafts"].map((function(e,t){return u.a.createElement(v.a,{button:!0,key:e},u.a.createElement(C.a,null,t%2===0?u.a.createElement(j.a,null):u.a.createElement(V.a,null)),u.a.createElement(x.a,{primary:e}))}))),u.a.createElement(D.a,null),u.a.createElement(M.a,null,["All mail","Trash","Spam"].map((function(e,t){return u.a.createElement(v.a,{button:!0,key:e},u.a.createElement(C.a,null,t%2===0?u.a.createElement(j.a,null):u.a.createElement(V.a,null)),u.a.createElement(x.a,{primary:e}))}))))))}var L=n(148),A=n(169),N=n.n(A),U=n(170),z=n.n(U),P=n(252),B=n(70),I=n(32),Z=n(10),F=Object(d.a)((function(e){return{sectionDesktop:Object(p.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(p.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function _(){var e=F(),t=u.a.useState(null),n=Object(E.a)(t,2),o=n[0],a=n[1],r=u.a.useState(null),i=Object(E.a)(r,2),l=i[0],c=i[1],s=Object(I.b)(),p=Object(Z.h)(),d=Boolean(o),m=Boolean(l),f=function(){c(null)},g=function(){a(null),f()},h=function(){s.signout(),g()},k="primary-search-account-menu",w=u.a.createElement(B.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},id:k,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:d,onClose:g},u.a.createElement(P.a,{onClick:g},"My Profile"),u.a.createElement(P.a,{onClick:h},"Sign out")),y=u.a.createElement(B.a,{anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:m,onClose:f},u.a.createElement(P.a,{onClick:g},"My Profile"),u.a.createElement(P.a,{onClick:h},"Sign out"));return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:e.sectionDesktop},u.a.createElement(L.a,{color:"inherit",onClick:function(){return p.push("/upload-image")}},"Upload"),u.a.createElement(b.a,{edge:"end","aria-label":"account of current user","aria-controls":k,"aria-haspopup":"true",onClick:function(e){a(e.currentTarget)},color:"inherit"},u.a.createElement(N.a,null))),u.a.createElement("div",{className:e.sectionMobile},u.a.createElement(b.a,{"aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},color:"inherit"},u.a.createElement(z.a,null))),y,w)}var K=Object(d.a)((function(e){return{grow:{flexGrow:1},title:Object(p.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"})}}));function W(){var e=K();return Object(I.b)().getUser()?u.a.createElement("div",{className:e.grow},u.a.createElement(m.a,{position:"static"},u.a.createElement(f.a,null,u.a.createElement(R,null),u.a.createElement(g.a,{className:e.title,variant:"h6",noWrap:!0},u.a.createElement(h.b,{to:"/",style:{textDecoration:"none",color:"white"}},"Virtual Microscope"," ")),u.a.createElement("div",{className:e.grow}),u.a.createElement(_,null)))):u.a.createElement(u.a.Fragment,null)}var H={maxWidth:"xl",component:"main"};function J(e){var t=Object(l.a)({},e),n=t.WrappedComponent,c=t.containerOptions,p=Object(l.a)(Object(l.a)({},H),c);return function(e){Object(r.a)(l,e);var t=Object(i.a)(l);function l(){return Object(o.a)(this,l),t.apply(this,arguments)}return Object(a.a)(l,[{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(W,null),u.a.createElement(s.a,p,u.a.createElement(n,null)))}}]),l}(u.a.Component)}},259:function(e,t,n){"use strict";n.r(t);var o=n(31),a=n(0),r=n.n(a),i=n(10),l=n(161),c=n(162),u=n(182),s=n(164),p=n(163),d=n(187),m=n.n(d),f=(n(188),n(160)),g=n.n(f),h=(n(189),n(260)),E=n(258),k=n(190),b=n.n(k),w=n(191),y=n.n(w),M=n(192),D=n.n(M),v=n(193),C=n.n(v),x=n(100),O=Object(x.a)((function(e){return{list:{marginTop:"90px",paddingLeft:"10px",position:"absolute",zIndex:1e3},icon:{color:"black",backgroundColor:"white",borderRadius:"5px",fontSize:"22px",border:"3px solid #ccc",padding:"3px","&:hover":{cursor:"pointer",backgroundColor:"#f4f4f4;"}},active:{backgroundColor:"#4051b5",color:"white","&:hover":{backgroundColor:"#4051b5"}}}}));function j(e){var t=e.editPolygon,n=e.isEditing,o=O();return r.a.createElement("div",{className:o.list},r.a.createElement(C.a,{title:"editPolygon",onClick:t,className:"".concat(o.icon," ").concat(n&&o.active," ")}))}delete f.Icon.Default.prototype._getIconUrl,f.Icon.Default.mergeOptions({iconRetinaUrl:D.a,iconUrl:b.a,shadowUrl:y.a});var S=function(e){Object(s.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).editPolygon=function(t,n){console.log(e.editRef.current),e.editRef.current.startPolygon()},e.onEnable=function(t,n){e.setState({isEditing:!0})},e.onDrawingCommit=function(t,n){console.log("onDrawingCommit"),e.setState({isEditing:!1}),console.log(e.editRef.current)},e.clearAll=function(){e.editRef.current.clearAll(),e.editors=[]},e.onEndDrawing=function(t,n){e.redoArr=[],e.removeTooltip(t),e.editors.push(t.layer.editor),e.layers.push(t.layer),e.setState({isContinueDisabled:!e.editors.some((function(e){return e.continueBackward}))}),e.layerListeners()},e.layerListeners=function(){e.layers.forEach((function(e){e.on("mouseover",(function(t){e.bindTooltip("Ctrl+click to delete layer").openTooltip()})),e.on("click",g.a.DomEvent.stop).on("click",(function(e){console.log(this.editor.deleteShapeAt,this.editEnabled(),e),(e.originalEvent.ctrlKey||e.originalEvent.metaKey)&&this.editEnabled()&&this.editor.deleteShapeAt&&this.editor.deleteShapeAt(e.latlng)}),e)}))},e.continueBackward=function(){e.editors.forEach((function(e){e.continueBackward&&e.continueBackward()}))},e.continueForward=function(){e.editors.forEach((function(e){e.continueForward&&e.continueForward()}))},e.onStartDrawing=function(t,n){var o=document.querySelector(".leaflet-container");e.tooltip=g.a.DomUtil.create("span","tooltip-wrapper"),e.tooltip.style.zIndex="9999",e.tooltip.style.position="absolute",o.appendChild(e.tooltip),e.addTooltip(t)},e.onDrawingClick=function(t,n){e.updateTooltip(t)},e.addTooltip=function(t){g.a.DomEvent.on(document,"mousemove",e.moveTooltip),e.tooltip.innerHTML="Ctrl+Z, Shift+Z",e.tooltip.style.display="block"},e.removeTooltip=function(t){e.tooltip.innerHTML="",e.tooltip.style.display="none",g.a.DomEvent.off(document,"mousemove",e.moveTooltip)},e.moveTooltip=function(t){e.tooltip.style.left=t.clientX+20+"px",e.tooltip.style.top=t.clientY-10+"px"},e.updateTooltip=function(t){t.layer.editor._drawnLatLngs&&(t.layer.editor._drawnLatLngs.length,t.layer.editor.MIN_VERTEX,e.tooltip.innerHTML="Ctrl+Z, Shift+Z. ".concat(t.latlng.lat,",").concat(t.latlng.lng))},e.redoListener=function(){var t=null,n=Object(u.a)(e);g.a.DomEvent.addListener(document,"keydown",(function(e){if(90===e.keyCode){if(!this.editTools._drawingEditor)return;e.shiftKey?n.redoArr.length&&this.editTools._drawingEditor.push(n.redoArr.pop()):(t=this.editTools._drawingEditor.pop())&&n.redoArr.push(t)}}),e.mapRef.current.leafletElement)},e.state={isContinueDisabled:!0,isEditing:!1},e.editRef=Object(a.createRef)(),e.mapRef=Object(a.createRef)(),e.redoArr=[],e.editors=[],e.layers=[],e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.redoListener()}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(m.a,{ref:this.editRef,onStartDrawing:this.onStartDrawing,onDrawingClick:this.onDrawingClick,onEndDrawing:this.onEndDrawing,onEnable:this.onEnable,onDrawingCommit:this.onDrawingCommit,onShapeDelete:function(e,t){console.log("shape delete")},onShapeDeleted:function(e,t){console.log("shape deleted")},onEditing:function(e,t){console.log("onEditing")},onDisable:function(e,t){console.log("onDisable")},onDrawingMouseDown:function(e,t){console.log("onDrawingMouseDown")},onDrawingMouseUp:function(e,t){console.log("onDrawingMouseUp")},onDrawingMove:function(e,t){console.log("onDrawingMove")},onCancelDrawing:function(e,t){console.log("onCancelDrawing")},onDragStart:function(e,t){console.log("onDragStart")},onDrag:function(e,t){console.log("onDrag")},onDragEnd:function(e,t){console.log("onDragEnd")},onVertexMarkerDrag:function(e,t){console.log("onVertexMarkerDrag")},onVertexMarkerDragStart:function(e,t){console.log("onVertexMarkerDragStart")},onVertexMarkerDragEnd:function(e,t){console.log("onVertexMarkerDragEnd")},onVertextCtrlClick:function(e,t){console.log("onVertextCtrlClick")},onNewVertex:function(e,t){console.log("onNewVertex")},onVertexMarkerClick:function(e,t){console.log("onVertexMarkerClick")},onVertexRawMarkerClick:function(e,t){console.log("onVertexRawMarkerClick")},onVertexDeleted:function(e,t){console.log("onVertexDeleted")},onVertexMarkerCtrlClick:function(e,t){console.log("onVertexMarkerCtrlClick")},onVertexMarkerShiftClick:function(e,t){console.log("onVertexMarkerShiftClick")},onVertexMarkerMetaKeyClick:function(e,t){console.log("onVertexMarkerMetaKeyClick")},onVertexMarkerAltClick:function(e,t){console.log("onVertexMarkerAltClick")},onVertexMarkerContextMenu:function(e,t){console.log("onVertexMarkerContextMenu")},onVertexMarkerMouseDown:function(e,t){console.log("onVertexMarkerMouseDown")},onVertexMarkerMouseOver:function(e,t){console.log("onVertexMarkerMouseOver")},onVertexMarkerMouseOut:function(e,t){console.log("onVertexMarkerMouseOut")},onMiddleMarkerMouseDown:function(e,t){console.log("onMiddleMarkerMouseDown")}},r.a.createElement("div",null,r.a.createElement(h.a,{ref:this.mapRef,editable:!0,zoom:this.props.mapOptions.zoom,center:this.props.mapOptions.center,maxZoom:this.props.mapOptions.maxZoom,minZoom:this.props.mapOptions.minZoom},r.a.createElement(j,{editPolygon:this.editPolygon,isEditing:this.state.isEditing}),r.a.createElement(E.a,{url:this.props.url,noWrap:!0,attribution:"Charlie Maps"})))))}}]),n}(a.Component),V=n(66),T=n(159),R=n(67);var L=Object(T.a)({WrappedComponent:function(){var e=new URLSearchParams(Object(i.i)().search),t=e.get("id")||"",n=e.get("version")||"",l=Object(a.useState)(!0),c=Object(o.a)(l,2),u=c[0],s=c[1],p=Object(a.useState)(""),d=Object(o.a)(p,2),m=d[0],f=d[1],g=Object(a.useState)({}),h=Object(o.a)(g,2),E=h[0],k=h[1];return Object(a.useEffect)((function(){fetch("".concat(V.a,"/").concat(t,"/").concat(n)).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);t.error?console.log("image not found"):(f(t.imageUrl),k(t.mapOptions))})).catch((function(){})).finally((function(){s(!1)}))}),[t,n]),u?r.a.createElement(R.a,null):m?r.a.createElement(S,{url:m,mapOptions:E}):r.a.createElement("p",null," There is no Image with the id: ",t)},containerOptions:{disableGutters:!0}});t.default=L}}]);
//# sourceMappingURL=8.d11e2c47.chunk.js.map