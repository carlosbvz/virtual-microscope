{"version":3,"sources":["components/header/left-menu.js","components/header/right-menu.js","components/header/header.js","layouts/default.js","components/interactive-image/controllers.js","components/interactive-image/interactive-image.js","pages/interactive-image-page.js"],"names":["useStyles","makeStyles","theme","menuButton","marginRight","spacing","list","width","fullList","LeftMenu","classes","React","useState","isDrawerOpen","setDrawerOpen","toggleDrawer","event","type","key","IconButton","edge","className","color","aria-label","onClick","Drawer","open","onClose","role","onKeyDown","List","map","text","index","ListItem","button","ListItemIcon","ListItemText","primary","Divider","sectionDesktop","display","breakpoints","up","sectionMobile","RightMenu","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","auth","useAuth","history","useHistory","isMenuOpen","Boolean","isMobileMenuOpen","handleMobileMenuClose","handleMenuClose","signout","menuId","renderMenu","anchorOrigin","vertical","horizontal","id","keepMounted","transformOrigin","MenuItem","renderMobileMenu","Button","push","aria-controls","aria-haspopup","currentTarget","grow","flexGrow","title","PrimarySearchAppBar","getUser","AppBar","position","Toolbar","Typography","variant","noWrap","to","style","textDecoration","defaultContainerOptions","maxWidth","component","withDefaultLayout","props","WrappedComponent","containerOptions","mergedContainerOptions","Container","Component","marginTop","paddingLeft","zIndex","icon","backgroundColor","borderRadius","fontSize","border","padding","cursor","active","Controllers","editPolygon","isEditing","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","markerRetina","iconUrl","markerIcon","shadowUrl","markerShadowIcon","InteractiveImage","e","console","log","editRef","current","startPolygon","onEnable","setState","onDrawingCommit","clearAll","editors","onEndDrawing","redoArr","removeTooltip","layer","editor","layers","isContinueDisabled","some","continueBackward","layerListeners","forEach","on","bindTooltip","openTooltip","L","DomEvent","stop","this","deleteShapeAt","editEnabled","originalEvent","ctrlKey","metaKey","latlng","continueForward","onStartDrawing","container","document","querySelector","tooltip","DomUtil","create","appendChild","addTooltip","onDrawingClick","updateTooltip","moveTooltip","innerHTML","off","left","clientX","top","clientY","_drawnLatLngs","length","MIN_VERTEX","lat","lng","redoListener","that","addListener","keyCode","editTools","_drawingEditor","shiftKey","pop","mapRef","leafletElement","state","createRef","height","ref","onShapeDelete","onShapeDeleted","onEditing","onDisable","onDrawingMouseDown","onDrawingMouseUp","onDrawingMove","onCancelDrawing","onDragStart","onDrag","onDragEnd","onVertexMarkerDrag","onVertexMarkerDragStart","onVertexMarkerDragEnd","onVertextCtrlClick","onNewVertex","onVertexMarkerClick","onVertexRawMarkerClick","onVertexDeleted","onVertexMarkerCtrlClick","onVertexMarkerShiftClick","onVertexMarkerMetaKeyClick","onVertexMarkerAltClick","onVertexMarkerContextMenu","onVertexMarkerMouseDown","onVertexMarkerMouseOver","onVertexMarkerMouseOut","onMiddleMarkerMouseDown","Map","editable","zoom","mapOptions","center","maxZoom","minZoom","TileLayer","url","attribution","LeafLetInteractivePage","query","URLSearchParams","useLocation","search","imageId","get","imageVersion","isLoading","setIsLoading","imageUrl","setImageUrl","setMapOptions","useEffect","fetch","interactiveImageURLApiRoute","then","data","response","parsedData","JSON","parse","error","catch","finally","disableGutters"],"mappings":"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","file":"static/js/8.97db418d.chunk.js","sourcesContent":["import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport List from \"@material-ui/core/List\";\nimport Divider from \"@material-ui/core/Divider\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport InboxIcon from \"@material-ui/icons/MoveToInbox\";\nimport MailIcon from \"@material-ui/icons/Mail\";\n\nconst useStyles = makeStyles((theme) => ({\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  list: {\n    width: 250,\n  },\n  fullList: {\n    width: \"auto\",\n  },\n}));\n\nexport default function LeftMenu() {\n  const classes = useStyles();\n  const [isDrawerOpen, setDrawerOpen] = React.useState(false);\n\n  const toggleDrawer = () => (event) => {\n    if (\n      event.type === \"keydown\" &&\n      (event.key === \"Tab\" || event.key === \"Shift\")\n    ) {\n      return;\n    }\n\n    setDrawerOpen(!isDrawerOpen);\n  };\n\n  const list = () => (\n    <div\n      className={classes.list}\n      role=\"presentation\"\n      onClick={toggleDrawer()}\n      onKeyDown={toggleDrawer()}\n    >\n      <List>\n        {[\"Inbox\", \"Starred\", \"Send email\", \"Drafts\"].map((text, index) => (\n          <ListItem button key={text}>\n            <ListItemIcon>\n              {index % 2 === 0 ? <InboxIcon /> : <MailIcon />}\n            </ListItemIcon>\n            <ListItemText primary={text} />\n          </ListItem>\n        ))}\n      </List>\n      <Divider />\n      <List>\n        {[\"All mail\", \"Trash\", \"Spam\"].map((text, index) => (\n          <ListItem button key={text}>\n            <ListItemIcon>\n              {index % 2 === 0 ? <InboxIcon /> : <MailIcon />}\n            </ListItemIcon>\n            <ListItemText primary={text} />\n          </ListItem>\n        ))}\n      </List>\n    </div>\n  );\n\n  return (\n    <>\n      <IconButton\n        edge=\"start\"\n        className={classes.menuButton}\n        color=\"inherit\"\n        aria-label=\"open drawer\"\n        onClick={toggleDrawer()}\n      >\n        <MenuIcon />\n      </IconButton>\n\n      <Drawer open={isDrawerOpen} onClose={toggleDrawer()}>\n        {list()}\n      </Drawer>\n    </>\n  );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport MoreIcon from \"@material-ui/icons/MoreVert\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport { useAuth } from \"../../contexts/auth-context\";\nimport { useHistory } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  sectionDesktop: {\n    display: \"none\",\n    [theme.breakpoints.up(\"md\")]: {\n      display: \"flex\",\n    },\n  },\n  sectionMobile: {\n    display: \"flex\",\n    [theme.breakpoints.up(\"md\")]: {\n      display: \"none\",\n    },\n  },\n}));\n\nexport default function RightMenu() {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\n  const auth = useAuth();\n  const history = useHistory();\n\n  const isMenuOpen = Boolean(anchorEl);\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n  const handleProfileMenuOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMobileMenuClose = () => {\n    setMobileMoreAnchorEl(null);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  const signout = () => {\n    auth.signout();\n    handleMenuClose();\n  };\n\n  const handleMobileMenuOpen = (event) => {\n    setMobileMoreAnchorEl(event.currentTarget);\n  };\n\n  const menuId = \"primary-search-account-menu\";\n  const renderMenu = (\n    <Menu\n      anchorEl={anchorEl}\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n      id={menuId}\n      keepMounted\n      transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n      open={isMenuOpen}\n      onClose={handleMenuClose}\n    >\n      <MenuItem onClick={handleMenuClose}>My Profile</MenuItem>\n      <MenuItem onClick={signout}>Sign out</MenuItem>\n    </Menu>\n  );\n\n  const mobileMenuId = \"primary-search-account-menu-mobile\";\n  const renderMobileMenu = (\n    <Menu\n      anchorEl={mobileMoreAnchorEl}\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n      id={mobileMenuId}\n      keepMounted\n      transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n      open={isMobileMenuOpen}\n      onClose={handleMobileMenuClose}\n    >\n      <MenuItem onClick={handleMenuClose}>My Profile</MenuItem>\n      <MenuItem onClick={signout}>Sign out</MenuItem>\n    </Menu>\n  );\n\n  return (\n    <>\n      <div className={classes.sectionDesktop}>\n        <Button \n          color=\"inherit\"\n          onClick={() => history.push(\"/upload-image\") }>\n            Upload\n        </Button>\n\n        <IconButton\n          edge=\"end\"\n          aria-label=\"account of current user\"\n          aria-controls={menuId}\n          aria-haspopup=\"true\"\n          onClick={handleProfileMenuOpen}\n          color=\"inherit\"\n        >\n          <AccountCircle />\n        </IconButton>\n      </div>\n\n      <div className={classes.sectionMobile}>\n        <IconButton\n          aria-label=\"show more\"\n          aria-controls={mobileMenuId}\n          aria-haspopup=\"true\"\n          onClick={handleMobileMenuOpen}\n          color=\"inherit\"\n        >\n          <MoreIcon />\n        </IconButton>\n      </div>\n\n      {renderMobileMenu}\n      {renderMenu}\n    </>\n  );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Link } from \"react-router-dom\";\nimport LeftMenu from \"./left-menu\";\n// import Search from \"./search\";\nimport RightMenu from \"./right-menu\";\nimport {useAuth} from '../../contexts/auth-context';\n\nconst useStyles = makeStyles((theme) => ({\n  grow: {\n    flexGrow: 1,\n  },\n  title: {\n    display: \"none\",\n    [theme.breakpoints.up(\"sm\")]: {\n      display: \"block\",\n    },\n  },\n}));\n\nexport default function PrimarySearchAppBar() {\n  const classes = useStyles();\n  const user = useAuth().getUser();\n\n  // NonAuthed Headed\n  if (!user) return(<></>);\n\n  // Authed Header\n  return (\n    <div className={classes.grow}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <LeftMenu />\n\n          <Typography className={classes.title} variant=\"h6\" noWrap>\n            <Link to=\"/\" style={{ textDecoration: \"none\", color: \"white\" }}>\n              Virtual Microscope{\" \"}\n            </Link>\n          </Typography>\n\n          {/* <Search /> */}\n\n          <div className={classes.grow} />\n\n          <RightMenu />\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\n","import React from \"react\";\nimport Container from \"@material-ui/core/Container\";\nimport Header from \"../components/header/header\";\n\nconst defaultContainerOptions = {\n  maxWidth: \"xl\",\n  component: \"main\"\n}\n\nexport default function withDefaultLayout(props) {\n  \n  const { WrappedComponent, containerOptions } = {...props};\n  const mergedContainerOptions = {...defaultContainerOptions, ...containerOptions};\n\n  return class extends React.Component {\n    render() {\n      return (\n        <>\n          <Header />\n          <Container {...mergedContainerOptions} >\n            <WrappedComponent />\n          </Container>\n        </>\n      );\n    }\n  };\n}\n","import React from \"react\";\nimport TimelineIcon from '@material-ui/icons/Timeline';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n    list: {\n        marginTop: \"90px\",\n        paddingLeft: \"10px\",\n        position: \"absolute\",\n        zIndex: 1000\n    },\n    icon: {\n        color: \"black\",\n        backgroundColor: \"white\",\n        borderRadius: \"5px\",\n        fontSize: \"22px\",\n        border: \"3px solid #ccc\",\n        padding: \"3px\",\n        \"&:hover\": {\n          cursor: \"pointer\",\n          backgroundColor: \"#f4f4f4;\"\n        }\n    },\n    active: {\n      backgroundColor: \"#4051b5\",\n      color: \"white\",\n      \"&:hover\": {\n        backgroundColor: \"#4051b5\",\n      }\n    }\n  }));\n\nexport default function Controllers({editPolygon, isEditing}) {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.list}>\n      <TimelineIcon\n        title=\"editPolygon\"\n        onClick={editPolygon}\n        className={`${classes.icon} ${isEditing && classes.active} `}\n      >\n      </TimelineIcon>\n    </div>\n  );\n}\n","import React, { Component, createRef } from \"react\";\nimport ReactLeafletEditable from \"react-leaflet-editable\";\nimport \"leaflet/dist/leaflet.css\";\nimport L, { Icon } from \"leaflet\";\nimport \"leaflet-editable\";\nimport { Map, TileLayer } from \"react-leaflet\";\nimport markerIcon from \"leaflet/dist/images/marker-icon.png\";\nimport markerShadowIcon from \"leaflet/dist/images/marker-shadow.png\";\nimport markerRetina from \"leaflet/dist/images/marker-icon-2x.png\";\nimport Controllers from \"./controllers\";\n\ndelete Icon.Default.prototype._getIconUrl;\n\nIcon.Default.mergeOptions({\n  iconRetinaUrl: markerRetina,\n  iconUrl: markerIcon,\n  shadowUrl: markerShadowIcon,\n});\n\nexport default class InteractiveImage extends Component {\n  constructor() {\n    super();\n    this.state = {\n      isContinueDisabled: true,\n      isEditing: false,\n    };\n    this.editRef = createRef();\n    this.mapRef = createRef();\n    this.redoArr = [];\n    this.editors = [];\n    this.layers = [];\n  }\n\n  editPolygon = (e, map) => {\n    console.log(this.editRef.current)\n    this.editRef.current.startPolygon();\n  };\n  onEnable = (e, map) => {\n    // console.log(\"onEnable\", e, map);\n    this.setState({isEditing: true});\n  };\n  onDrawingCommit = (e, map) => {\n    console.log(\"onDrawingCommit\");\n    this.setState({isEditing: false});\n    console.log(this.editRef.current);\n  }\n\n  clearAll = () => {\n    this.editRef.current.clearAll();\n    this.editors = [];\n  };\n  onEndDrawing = (e, map) => {\n    this.redoArr = [];\n    this.removeTooltip(e);\n    this.editors.push(e.layer.editor);\n    this.layers.push(e.layer);\n    this.setState({\n      isContinueDisabled: !this.editors.some((editor) => {\n        return editor.continueBackward;\n      }),\n    });\n    this.layerListeners();\n  };\n  layerListeners = () => {\n    this.layers.forEach((layer) => {\n      layer.on(\"mouseover\", (e) => {\n        layer.bindTooltip(\"Ctrl+click to delete layer\").openTooltip();\n      });\n      layer.on(\"click\", L.DomEvent.stop).on(\"click\", function (e) {\n          console.log(this.editor.deleteShapeAt, this.editEnabled(), e);\n          if (\n            (e.originalEvent.ctrlKey || e.originalEvent.metaKey) &&\n            this.editEnabled() &&\n            this.editor.deleteShapeAt\n          )\n            this.editor.deleteShapeAt(e.latlng);\n        },\n        layer\n      );\n    });\n  };\n  continueBackward = () => {\n    this.editors.forEach((editor) => {\n      editor.continueBackward && editor.continueBackward();\n    });\n  };\n  continueForward = () => {\n    this.editors.forEach((editor) => {\n      editor.continueForward && editor.continueForward();\n    });\n  };\n  onStartDrawing = (e, map) => {\n    const container = document.querySelector(\".leaflet-container\");\n    this.tooltip = L.DomUtil.create(\"span\", \"tooltip-wrapper\");\n    this.tooltip.style.zIndex = \"9999\";\n    this.tooltip.style.position = \"absolute\";\n    container.appendChild(this.tooltip);\n    this.addTooltip(e);\n  };\n  onDrawingClick = (e, map) => {\n    this.updateTooltip(e);\n  };\n  addTooltip = (e) => {\n    L.DomEvent.on(document, \"mousemove\", this.moveTooltip);\n    this.tooltip.innerHTML = `Ctrl+Z, Shift+Z`;\n    this.tooltip.style.display = \"block\";\n  };\n  removeTooltip = (e) => {\n    this.tooltip.innerHTML = \"\";\n    this.tooltip.style.display = \"none\";\n    L.DomEvent.off(document, \"mousemove\", this.moveTooltip);\n  };\n  moveTooltip = (e) => {\n    this.tooltip.style.left = e.clientX + 20 + \"px\";\n    this.tooltip.style.top = e.clientY - 10 + \"px\";\n  };\n  updateTooltip = (e) => {\n    if (!e.layer.editor._drawnLatLngs) return;\n    if (e.layer.editor._drawnLatLngs.length < e.layer.editor.MIN_VERTEX) {\n      this.tooltip.innerHTML = `Ctrl+Z, Shift+Z. ${e.latlng.lat},${e.latlng.lng}`;\n    } else {\n      this.tooltip.innerHTML = `Ctrl+Z, Shift+Z. ${e.latlng.lat},${e.latlng.lng}`;\n    }\n  };\n  redoListener = () => {\n    let latlng = null;\n    const that = this;\n    L.DomEvent.addListener(\n      document,\n      \"keydown\",\n      function (e) {\n        if (e.keyCode === 90) {\n          if (!this.editTools._drawingEditor) return;\n          if (e.shiftKey) {\n            if (that.redoArr.length)\n              this.editTools._drawingEditor.push(that.redoArr.pop());\n          } else {\n            latlng = this.editTools._drawingEditor.pop();\n            if (latlng) that.redoArr.push(latlng);\n          }\n        }\n      },\n      this.mapRef.current.leafletElement\n    );\n  };\n  componentDidMount() {\n    // const map = this.mapRef.current.leafletElement;\n    // this.polyline = L.polyline([[43.1, 1.2], [43.2, 1.3], [43.3, 1.2]]).addTo(map);\n    // console.log(this.polyline)\n    // map.fitBounds(this.polyline.getBounds())\n    // console.log(this.polyline.enableEdit())\n    // this.polyline.editor.continueForward();\n    // this.polyline.editor.continueBackward()\n    this.redoListener();\n  }\n  render() {\n    return (\n      <div style={{ height: \"100%\" }}>\n        <ReactLeafletEditable\n          ref={this.editRef}\n          onStartDrawing={this.onStartDrawing}\n          onDrawingClick={this.onDrawingClick}\n          onEndDrawing={this.onEndDrawing}\n          onEnable={this.onEnable}\n          onDrawingCommit={this.onDrawingCommit}\n          // Other Available methods\n          onShapeDelete={(e, map) => {\n            console.log(\"shape delete\");\n          }}\n          onShapeDeleted={(e, map) => {\n            console.log(\"shape deleted\");\n          }}\n          onEditing={(e, map) => {\n            console.log(\"onEditing\");\n          }}\n          onDisable={(e, map) => {\n            console.log(\"onDisable\");\n          }}\n          onDrawingMouseDown={(e, map) => {\n            console.log(\"onDrawingMouseDown\");\n          }}\n          onDrawingMouseUp={(e, map) => {\n            console.log(\"onDrawingMouseUp\");\n          }}\n          onDrawingMove={(e, map) => {\n            console.log(\"onDrawingMove\");\n          }}\n          onCancelDrawing={(e, map) => {\n            console.log(\"onCancelDrawing\");\n          }}\n          onDragStart={(e, map) => {\n            console.log(\"onDragStart\");\n          }}\n          onDrag={(e, map) => {\n            console.log(\"onDrag\");\n          }}\n          onDragEnd={(e, map) => {\n            console.log(\"onDragEnd\");\n          }}\n          onVertexMarkerDrag={(e, map) => {\n            console.log(\"onVertexMarkerDrag\");\n          }}\n          onVertexMarkerDragStart={(e, map) => {\n            console.log(\"onVertexMarkerDragStart\");\n          }}\n          onVertexMarkerDragEnd={(e, map) => {\n            console.log(\"onVertexMarkerDragEnd\");\n          }}\n          onVertextCtrlClick={(e, map) => {\n            console.log(\"onVertextCtrlClick\");\n          }}\n          onNewVertex={(e, map) => {\n            console.log(\"onNewVertex\");\n          }}\n          onVertexMarkerClick={(e, map) => {\n            console.log(\"onVertexMarkerClick\");\n          }}\n          onVertexRawMarkerClick={(e, map) => {\n            console.log(\"onVertexRawMarkerClick\");\n          }}\n          onVertexDeleted={(e, map) => {\n            console.log(\"onVertexDeleted\");\n          }}\n          onVertexMarkerCtrlClick={(e, map) => {\n            console.log(\"onVertexMarkerCtrlClick\");\n          }}\n          onVertexMarkerShiftClick={(e, map) => {\n            console.log(\"onVertexMarkerShiftClick\");\n          }}\n          onVertexMarkerMetaKeyClick={(e, map) => {\n            console.log(\"onVertexMarkerMetaKeyClick\");\n          }}\n          onVertexMarkerAltClick={(e, map) => {\n            console.log(\"onVertexMarkerAltClick\");\n          }}\n          onVertexMarkerContextMenu={(e, map) => {\n            console.log(\"onVertexMarkerContextMenu\");\n          }}\n          onVertexMarkerMouseDown={(e, map) => {\n            console.log(\"onVertexMarkerMouseDown\");\n          }}\n          onVertexMarkerMouseOver={(e, map) => {\n            console.log(\"onVertexMarkerMouseOver\");\n          }}\n          onVertexMarkerMouseOut={(e, map) => {\n            console.log(\"onVertexMarkerMouseOut\");\n          }}\n          onMiddleMarkerMouseDown={(e, map) => {\n            console.log(\"onMiddleMarkerMouseDown\");\n          }}\n        >\n          <div>\n            <Map\n              ref={this.mapRef}\n              editable={true}\n              zoom={this.props.mapOptions.zoom}\n              center={this.props.mapOptions.center}\n              maxZoom={this.props.mapOptions.maxZoom}\n              minZoom={this.props.mapOptions.minZoom}\n            >\n              <Controllers editPolygon={this.editPolygon} isEditing={this.state.isEditing} />\n              <TileLayer url={this.props.url} noWrap={true} attribution=\"Charlie & Julio Maps\"/>\n            </Map>\n          </div>\n        </ReactLeafletEditable>\n      </div>\n    );\n  }\n}\n","import React, { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport InteractiveImage from \"../components/interactive-image/interactive-image\";\nimport { interactiveImageURLApiRoute } from \"../routes/api\";\nimport withDefaultLayout from \"../layouts/default\";\nimport LoadingPage from \"../components/loading/page-loading\";\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nfunction LeafLetInteractive() {\n  const query = useQuery();\n  const imageId = query.get(\"id\") || '';\n  const imageVersion = query.get(\"version\") || '';\n  const [isLoading, setIsLoading] = useState(true);\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [mapOptions, setMapOptions] = useState({});\n\n  useEffect(() => {\n    fetch(`${interactiveImageURLApiRoute}/${imageId}/${imageVersion}`)\n      .then((data) => {\n        return data.text();\n      })\n      .then((response) => {\n        const parsedData = JSON.parse(response);\n        if (parsedData.error) console.log(\"image not found\");\n        else {\n          setImageUrl(parsedData.imageUrl);\n          setMapOptions(parsedData.mapOptions);\n        }\n      })\n      .catch(() => {})\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }, [imageId, imageVersion]);\n\n  return (\n    isLoading ? <LoadingPage />\n    : imageUrl\n      ? <InteractiveImage\n          url={imageUrl}\n          mapOptions={mapOptions}\n        />\n        : <p> There is no Image with the id: {imageId}</p>\n      \n  )\n}\n\nconst LeafLetInteractivePage = withDefaultLayout({\n  WrappedComponent: LeafLetInteractive,\n  containerOptions: {\n    disableGutters: true,\n  },\n});\nexport default LeafLetInteractivePage;\n"],"sourceRoot":""}